<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="static/css/skeleton.css">
  <link rel="stylesheet" href="static/css/normalize.css">
  <link rel="stylesheet" href="static/css/jquery.contextMenu.css">
  <link rel="stylesheet" href="static/css/highlight.css">
  {% assets "css_all" %} <link rel="stylesheet" href="{{ ASSET_URL }}"> {% endassets %}
  <link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet">
  <title>Disassembler</title>
</head>


<body>
  <main>
  <div id="top-half" class="row">
    <div id="functions-column" class="four columns">
      <h2 class='header'> 
        <div class='title'>filename</div>
        <div class='filename'>{{ filename }} </div>
      </h2>

      <input type="text" placeholder="function name" id="function-name-input"/>

      {# all functions #}
      <div id='functions'>
        <div class='spacer'></div>
        <div class="nav-buttons">
          <button id="button-prev"> < </button>
          <button id="button-next"> > </button>
        </div>

        <div rv-each-func="functions.contents"
          class="function"
          rv-data-st-value="func.st_value"
          rv-data-offset="func.offset"
          rv-data-size="func.size"
          rv-on-click="ctrl.functionClicked"
          rv-on-mouseover="ctrl.hoverCollapsable"
          rv-on-mouseout="ctrl.removeHoverCollapsable">

          <span rv-each-part="func.name"
            rv-class-hovered="part.hovered"
            rv-class-expandable="part.expandable"
            rv-class-collapsable="part.collapsable"
            rv-text="part.display">
              
            </span>
        </div>
      </div>
    </div> {# end of functions column #}

    <div id="assembly-column" class="eight columns">
      {# selected function's assembly #}
      <div id='function-disasm'>
        <div class="selected-func-name">
        { assembly.func_name }
        </div>

        <div class="instructions-loading"
          rv-show="assembly.instructions_loading">
          <img src="static/img/pacman.gif"/>
        </div>

        <div class='jump-arrows'>
        </div>

        <div class="instructions">
          <span class='row instruction'
            rv-each-i="assembly.contents"
            rv-id='i.address'
            rv-on-click="ctrl.instructionClicked">
            <div class='address two columns'>{i.address}</div>
            <div class='mnemonic two columns'>{i.mnemonic}</div>
            <div class='op_str eight columns' rv-html="i.op_str"></div>
          </span>
        </div> {# end instructions #}
      </div> {# end assembly #}
    </div> {# end of assembly column #}
  </div> {# end of top half #}


  {# bottom half, basically #}
  <div id="function-analysis" class="row">
    <div class="exit" onclick="hideAnalysis()">&#215;</div>
      
      <div class="stack-info four columns">
        <h6>Stack trace</h6>
        <div class="stack-info-frame"
          rv-show="analysis.show_stack_info"
          rv-each-frame="analysis.stack_info"
          rv-on-click="ctrl.filepathClicked">
            <div class='row'>
              <span class="filename"> {frame.0} </span>
              <span class="lineno"> {frame.1} </span>
            </div>
            <div class='row'>
              <span class="function-name"> {frame.2} </span>
            </div>
          </div>
      </div>

      <div class="source-code seven columns">
        <pre class='before C++' rv-html="analysis.source_code.before"></pre>
        <pre class='target C++' rv-html="analysis.source_code.target"></pre>
        <pre class='after C++' rv-html="analysis.source_code.after"></pre>
      </div>

  </div> {# end function analysis #}
  </main>


<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
{% assets "js_disassemble" %} <script src="{{ ASSET_URL }}"></script> {% endassets %}

</body>

</html>